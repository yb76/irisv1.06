{TYPE:PROFILE,NAME:eCASH,GROUP:eCASH,VERSION:1.84,LNAME:e-CASH,LOGO:ecash.bmp,SEND_DSP_ENQ:[[,,{:[()SLEEP,1000],~ENQMSG:[02,\aE,2C,\a71,03],/eCASH/REQ:~ENQMSG},],/eCASH/SEND,],RECVSTA_L:[[,,{~I+:2},],[/ECASHECRCSV/F(~I),,,[[,,{/eCASHTMP/DENOM(~L):[()SUM,()MUL,/ECASHECRCSV/F(~I),100,/ECASHECRCSV/F(~I)|2-1|]},],[,,{~I+:1},],[,,{/eCASHTMP/QUATY(~L):/ECASHECRCSV/F(~I)},],[,,{~I+:1},],[/ECASHECRCSV/F(~I),</eCASHTMP/QUATY(~L),{/eCASHTMP/QUATY(~L):/ECASHECRCSV/F(~I)},],[,,{~I+:1},],[,,{~I+:1},],[/ECASHECRCSV/F(~I),T,{/eCASHTMP/QUATY(~L):0},],[,,{~I+:1},],[/ECASHECRCSV/F(~I),T,{/eCASHTMP/QUATY(~L):0},],[,,{~L+:1},[[~L,<11,,/eCASH/RECVSTA_L]]]]],],RECVSTA:[[,,{~I:3,//eCASHTMP/STATUSERROR:9,//eCASHTMP/ERROR>:,/eCASHTMP/DENOM>>:,/eCASHTMP/QUATY>>:,},[[/ECASHECRCSV/F1,O,{//eCASHTMP/ERROR:Please},eCASH_SHOWERROR],[/ECASHECRCSV/F1,!C,{//eCASHTMP/ERROR:Please},eCASH_SHOWERROR],[/ECASHECRCSV/F2,F,{//eCASHTMP/ERROR:Please},eCASH_SHOWERROR],[/ECASHECRCSV/F2,!O,{//eCASHTMP/ERROR:Please},eCASH_SHOWERROR],[/ECASHECRCSV/F3,F,{//eCASHTMP/ERROR:Please},eCASH_SHOWERROR],[/ECASHECRCSV/F3,!O,{//eCASHTMP/ERROR:Please},eCASH_SHOWERROR],[,,{~L:0,~J:0},/eCASH/RECVSTA_L]]],[,,{//eCASHTMP/STATUSERROR:0},]],RECVDSP:[[,,{~DISP_VALUE:/ECASHECRCSV/F1,~DISP1:~DISP_VALUE<.|-1|,~DISP2:~DISP_VALUE|2-1|,~AMT:[~DISP1,~DISP2]},[[~AMT,!/eCASHTMP/CASHAMT,{//eCASHTMP/ERROR:Failure},eCASH_SHOWERROR]]],[,,{//eCASHTMP/STATUSERROR:0},/eCASH/SEND_SAF]],SEND_ACK:[[,,{~ACKMSG:[02,\aA,2C,\a6D,03],/eCASH/REQ:~ACKMSG,:[()SER_SEND,/eCASH/REQ,1]},[[~RETURNACK,RECVSTA,,/eCASH/RECVSTA],[~RETURNACK,RECVDSP,,/eCASH/RECVDSP]]]],PARSEMSG:[[,,{~MSGID:0},[[~DATA,,{//ECASHECRCSV>>:,//ECASHECRCSV:,:[()CSV,ECASHECRCSV,\h~DATA,02,03,09],~MSGID:/ECASHECRCSV/F0,~DATA>:},[[~MSGID,!A,,[[~MSGID,,!N,[[~MSGID,!S,,[[~MSGID,!D,{//eCASHTMP/ERROR:unknown message},eCASH_SHOWERROR]]]]]]],[~MSGID,S,,[[/eCASHTMP/STATUS,2,,/eCASH/SEND_DSP_ENQ]]],[~MSGID,!A,{//eCASHTMP/STATUS:0},],[~MSGID,S,{/eCASH_TM1/TIMER>:,~RETURNACK:RECVSTA},/eCASH/SEND_ACK],[~MSGID,D,{~RETURNACK:RECVDSP},/eCASH/SEND_ACK],[~MSGID,A,,[[/eCASHTMP/STATUS,2,,/eCASH/SEND_DSP_ENQ],[/eCASHTMP/STATUS,1,{/eCASH_TM/TIMER:()NOW,},/eCASH/SEND_ENQ]]],]],]]],SEND:[[,,{:[()SER_SEND,/eCASH/REQ,1],~DATA:[()SER_RECV,2,50,1],:[[~DATA,NULL,{:[()SER_SEND,/eCASH/REQ,1],~DATA:[()SER_RECV,2,50,1]},]],:[[~DATA,NULL,{:[()SER_SEND,/eCASH/REQ,1],~DATA:[()SER_RECV,2,50,1]},]],},],[~DATA,NULL,{//eCASHTMP/STATUSERROR:9,//eCASHTMP/ERROR:No Response},eCASH_SHOWERROR],/eCASH/PARSEMSG],SEND_STATUS:[[,,{~STAMSG:[02,\aS,2C,\a7F,03],//eCASHTMP/STATUS:1,/eCASH/REQ:~STAMSG},/eCASH/SEND],],SEND_ENQ:[[,,{~ENQMSG:[02,\aE,2C,\a71,03],/eCASH/REQ:~ENQMSG},/eCASH/SEND]],SEND_SAF:[[/eCASH_SAF0,,{//eCASH_RESP>:,:[()UPLOAD_OBJ,eCASH_SAF0,()REMOTE],},[[/eCASH_RESP/RESULT,OK,{//eCASH_SAF0>:},],[/eCASH_RESP/RESULT,!OK,{:()ERRORBEEP,//eCASHTMP/NEXT:/CALLBACK/RETURN,//eCASHTMP/ERRLONE:Server,//eCASHTMP/ERROR:Not available,//eCASHTMP/ERRLFIVE:Call attendant},eCASH_SHOWERROR_TMOUT]]],[/eCASHTMP/STATUSERROR,9,,eCASH_SHOWERROR],/CALLBACK/RETURN],STTL_CHK:[[,,{/eCASH_TM/HHMM:[()TIME,hhmm,/eCASH_TM/NOW]},],[/eCASH_TM/HHMM,>500,{//eCASH_STTL_REQ/TID:/iPAY_CFG/TID,//eCASH_STTL_REQ/LASTSTTL:/eCASH_STTL_RESP/LASTSTTL,//eCASH_STTL_RESP>:,:[()UPLOAD_OBJ,eCASH_STTL_REQ,()REMOTE]},[[//eCASH_STTL_RESP/VALUE,,{:[()PRINT,/eCASH_STTL_RESP/VALUE],//iECRD>:,//iECRD:,//iECRD/FUNCTION:SETL},iECR_START]]]],TIMER:[[/eCASH_TM/TIMER,NULL,{/eCASH_TM/TIMER:()NOW},],[,,{/eCASH_TM/NOW:()NOW,/eCASH_TM/CHECK:[()SUB,/eCASH_TM/NOW,/eCASH_TM/TIMER],/eCASH_TM/YYMMDD:[()TIME,YYMMDD,/eCASH_TM/NOW]},],[/eCASHTMP/STATUS,0,{},[[/eCASH_TM/CHECK,>/eCASH_CONFIG/POLL_INTERVAL,{/eCASH_TM/TIMER>:},/eCASH/SEND_STATUS]]],[/eCASH_SAF0,,{//eCASH_RESP>:},[[/eCASH_TM2/TIMER,NULL,{/eCASH_TM2/TIMER:()NOW},],[,,{/eCASH_TM2/CHECK:[()SUB,()NOW,/eCASH_TM2/TIMER]},],[/eCASH_TM2/CHECK,>60,{/eCASH_TM2/TIMER>:,:[()UPLOAD_OBJ,eCASH_SAF0,()REMOTE],},[[/eCASH_RESP/RESULT,OK,{//eCASH_SAF0>:},],[/eCASH_RESP/RESULT,!OK,{:()ERRORBEEP,//eCASHTMP/NEXT:/CALLBACK/RETURN,//eCASHTMP/ERRLONE:Server,//eCASHTMP/ERROR:Not available,//eCASHTMP/ERRLFIVE:Call attendant},eCASH_SHOWERROR_TMOUT]]]]],[/eCASH_TM/YYMMDD,!/eCASH_STTL_RESP/LASTSTTL,{},/eCASH/STTL_CHK]],PATH:[[,INIT,{//eCASHTMP>:,//eCASHTMP:,//eCASHTMP/INIT:0,//ECASHECRCSV>:,//ECASHECRCSV:,//eCASHTMP/STATUS:0,//CALLBACK/SWIPE>>:,//CALLBACK/CARD>>:,//CALLBACK/SWIPE(/CALLBACK/SWIPE/COUNT):eCASH_SWIPE,//CALLBACK/CARD(/CALLBACK/CARD/COUNT):ALL,:[()SER_CONNECT,1,10,100,9600,8,N,1,4096],//CALLBACK/TIMER(/CALLBACK/TIMER/COUNT):'/eCASH/TIMER},GET_PROFILES]],SIGN:4DF1077C7D33C98E3F5E18303BDCD4AA41B92BD4}