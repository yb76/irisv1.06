{TYPE:DISPLAY,NAME:iPAY_TXN_START,GROUP:iPAY,VERSION:1.0,TOTAL:[[/TXN/ACCOUNT,CREDIT,{~bucket:/CPAT()/LABEL,//STTL()/CR_PRCHAMT+:[[/TXN/FUNC,[PRCH,COMP],,/TXN/AMOUNT]],//STTL()/CR_PRCHNUM+:[[/TXN/FUNC,[PRCH,COMP],,1]]},[[/TXN/FUNC,RFND,{//STTL()/CR_RFNDAMT+:/SHFT_NEW/RFNDAMT,//STTL()/CR_RFNDNUM+:/SHFT_NEW/RFNDNUM},],[/TXN/FUNC,AUTH,{//STTL_DETAIL()/AUTHAMT(~bucket)+:/SHFT_NEW/AUTHAMT,//STTL_DETAIL()/AUTHNUM(~bucket)+:/SHFT_NEW/AUTHNUM,//STTL_DETAIL()/AUTHAMT+:/SHFT_NEW/AUTHAMT,//STTL_DETAIL()/AUTHNUM+:/SHFT_NEW/AUTHNUM,//SHFT()/AUTHAMT(~bucket)+:/SHFT_NEW/AUTHAMT,//SHFT()/AUTHNUM(~bucket)+:/SHFT_NEW/AUTHNUM,//iPAY_CFG()/AUTHNUM(~bucket)+:/SHFT_NEW/AUTHNUM,//SHFT()/AUTHAMT+:/SHFT_NEW/AUTHAMT,//SHFT()/AUTHNUM+:/SHFT_NEW/AUTHNUM,//iPAY_CFG()/AUTHNUM+:/SHFT_NEW/AUTHNUM,//STTL()/AUTHAMT+:/SHFT_NEW/AUTHAMT,//STTL()/AUTHNUM+:/SHFT_NEW/AUTHNUM},]]],[/TXN/ACCOUNT,!CREDIT,{~bucket:7,//STTL()/DR_PRCHAMT+:[[/TXN/FUNC,[PRCH,CASH],,/TXN/AMOUNT]],//STTL()/DR_PRCHNUM+:[[/TXN/FUNC,[PRCH,CASH],,1]]},[[/TXN/FUNC,RFND,{//STTL()/DR_RFNDAMT+:/SHFT_NEW/RFNDAMT,//STTL()/DR_RFNDNUM+:/SHFT_NEW/RFNDNUM},],[/TXN/CASH,,{//STTL_DETAIL()/CASHAMT(~bucket)+:/SHFT_NEW/CASHAMT,//STTL_DETAIL()/CASHNUM(~bucket)+:/SHFT_NEW/CASHNUM,//STTL_DETAIL()/CASHAMT+:/SHFT_NEW/CASHAMT,//STTL_DETAIL()/CASHNUM+:/SHFT_NEW/CASHNUM,//SHFT()/CASHAMT(~bucket)+:/SHFT_NEW/CASHAMT,//SHFT()/CASHNUM(~bucket)+:/SHFT_NEW/CASHNUM,//iPAY_CFG()/CASHNUM(~bucket)+:/SHFT_NEW/CASHNUM,//SHFT()/CASHAMT+:/SHFT_NEW/CASHAMT,//SHFT()/CASHNUM+:/SHFT_NEW/CASHNUM,//iPAY_CFG()/CASHNUM+:/SHFT_NEW/CASHNUM},]]],[/TXN/FUNC,RFND,{//STTL_DETAIL()/RFNDAMT(~bucket)+:/SHFT_NEW/RFNDAMT,//STTL_DETAIL()/RFNDNUM(~bucket)+:/SHFT_NEW/RFNDNUM,//STTL_DETAIL()/RFNDAMT+:/SHFT_NEW/RFNDAMT,//STTL_DETAIL()/RFNDNUM+:/SHFT_NEW/RFNDNUM,//SHFT()/RFNDAMT(~bucket)+:/SHFT_NEW/RFNDAMT,//SHFT()/RFNDNUM(~bucket)+:/SHFT_NEW/RFNDNUM,//iPAY_CFG()/RFNDNUM(~bucket)+:/SHFT_NEW/RFNDNUM,//SHFT()/RFNDAMT+:/SHFT_NEW/RFNDAMT,//SHFT()/RFNDNUM+:/SHFT_NEW/RFNDNUM,//iPAY_CFG()/RFNDNUM+:/SHFT_NEW/RFNDNUM},],[/TXN/PTIP,,{//STTL_DETAIL()/TIPSAMT(~bucket)+:/SHFT_NEW/TIPSAMT,//STTL_DETAIL()/TIPSNUM(~bucket)+:/SHFT_NEW/TIPSNUM,//STTL_DETAIL()/TIPSAMT+:/SHFT_NEW/TIPSAMT,//STTL_DETAIL()/TIPSNUM+:/SHFT_NEW/TIPSNUM,//SHFT()/TIPSAMT(~bucket)+:/SHFT_NEW/TIPSAMT,//SHFT()/TIPSNUM(~bucket)+:/SHFT_NEW/TIPSNUM,//iPAY_CFG()/TIPSNUM(~bucket)+:/SHFT_NEW/TIPSNUM,//SHFT()/TIPSAMT+:/SHFT_NEW/TIPSAMT,//SHFT()/TIPSNUM+:/SHFT_NEW/TIPSNUM,//iPAY_CFG()/TIPSNUM+:/SHFT_NEW/TIPSNUM},],[/TXN/FUNC,[PRCH,COMP],{//STTL_DETAIL()/PRCHAMT(~bucket)+:/SHFT_NEW/PRCHAMT,//STTL_DETAIL()/PRCHNUM(~bucket)+:/SHFT_NEW/PRCHNUM,//STTL_DETAIL()/PRCHAMT+:/SHFT_NEW/PRCHAMT,//STTL_DETAIL()/PRCHNUM+:/SHFT_NEW/PRCHNUM,//SHFT()/PRCHAMT(~bucket)+:/SHFT_NEW/PRCHAMT,//SHFT()/PRCHNUM(~bucket)+:/SHFT_NEW/PRCHNUM,//iPAY_CFG()/PRCHNUM(~bucket)+:/SHFT_NEW/PRCHNUM,//SHFT()/PRCHAMT+:/SHFT_NEW/PRCHAMT,//SHFT()/PRCHNUM+:/SHFT_NEW/PRCHNUM,//iPAY_CFG()/PRCHNUM+:/SHFT_NEW/PRCHNUM},],[,,{//STTL_DETAIL()/TRANSNUM(~bucket)++:,//STTL_DETAIL()/TRANSNUM++:,//SHFT()/TRANSNUM(~bucket)++:,//SHFT()/TRANSNUM++:,//iPAY_CFG()/TRANSNUM++:},]],PATH:[[,INIT,,[[/iPAY_TRANS/PINBLOCK,TODO,{/iPAY_TRANS/PINBLOCK:[()PINBLOCK,()SUM,/FROMBANK()/STAN,1,/iPAY_TRANS/TOTAL,/iPAY_TRANS/PAN,/iPAY_TRANS/TRACK2,/iPAY/KPP]},],[/iPAY_TRANS/INVNO,NULL,,[[/FROMBANK()/INVNO,NULL,{//FROMBANK()/INVNO:1},],[,,{//FROMBANK()/INVNO++:},],[/FROMBANK()/INVNO,>999999,{//FROMBANK()/INVNO:1},],[,,{/iPAY_TRANS/INVNO:/FROMBANK()/INVNO},]]],[/iPAY_TRANS/EFB,NULL,,[[/iPAY/FUNCTION,COMP,{~YEAR:[()TIME,YY,()NOW],~MONTH:[()TIME,MM,()NOW]},[[/iPAY_TRANS/TRACK2,,,[[/iPAY_TRANS/TRACK2>=|1-2|,>80,,iPAY_EXPIRY_ERR],[/iPAY_TRANS/TRACK2>=|1-2|,<~YEAR,,iPAY_EXPIRY_ERR],[/iPAY_TRANS/TRACK2>=|3-4|,<~MONTH,,[[/iPAY_TRANS/TRACK2>=|1-2|,~YEAR,,iPAY_EXPIRY_ERR]]],iPAY_TRANS]],[/iPAY_TRANS/EXPIRY|2-1|,>80,,iPAY_EXPIRY_ERR],[/iPAY_TRANS/EXPIRY|2-1|,<~YEAR,,iPAY_EXPIRY_ERR],[/iPAY_TRANS/EXPIRY|4-3|,<~MONTH,,[[/iPAY_TRANS/EXPIRY|2-1|,~YEAR,,iPAY_EXPIRY_ERR]]],iPAY_TRANS]]]],iPAY_TRANS]],[,LAST,{:[()CLR_TMP,]},]],SIGN:C2706333963F3C9AB20484D079B18A2C102D6C0D}