{TYPE:DISPLAY,NAME:iPAY_SAF_RESP,GROUP:iPAY,VERSION:1.0,MSG60:[[GET,n,2,~HOST_INIT],[GET,n,2,~KEY_CHANGE],[GET,n,2,//FROMBANK()/FORCE_SETL]],MSG:[[CHK,64,[()MAC,/iPAY/KMACr,,/iPAY_DW_TXN/PAYLOAD|-17|]],[CHK,0,/(/MMER/ELECT)SAF0/RSPID],[CHK,11,/(/MMER/ELECT)SAF0/STAN],[GETS,37,~RRN],[GETS,39,~RC],[CHK,41,/MERCHANT()/TID]],PATH:[[,,{/iPAY_DW_TXN/PAYLOAD:[[/MERCHANT/DATA_ENC,TRUE,,[()AS2805_OFB,/iPAY/KDr,/iPAY_DW_TXN/PAYLOAD]],/iPAY_DW_TXN/PAYLOAD],:()IV_CLR,:[()AS2805_BREAK,/iPAY_DW_TXN/PAYLOAD,~MSG],~RC:[()MAP_TABLE,iPAY,MAP,~RC]},[[~RC,[EM,98],{/LOGON()/INITIALISED:FALSE},],[~HOST_INIT,1,{/LOGON()/INITIALISED>:,~HOST_INIT>:},],[~KEY_CHANGE,1,{/LOGON()/INITIALISED>:,~KEY_CHANGE>:},],[/FROMBANK()/FORCE_SETL,1,{//FROMBANK()/STTL_XMIT_TIME:()NOW},],[~RC,[00,21],{~INVNO:/(/MMER/ELECT)SAF0/INVNO,//(/MMER/ELECT)SAF0>:},[[~RRN,,{:[()LOCATE,'/(/MMER/ELECT)BATCH/INDEX,~INVNO,'/(/MMER/ELECT)BATCH()/INVNO,],:[()LOCATE,'/(/MMER/ELECT)SAF/INDEX,~INVNO,'/(/MMER/ELECT)SAF()/INVNO,],:[()LOCATE,'/(/MMER/ELECT)TIPS/INDEX,~INVNO,'/(/MMER/ELECT)TIPS()/INVNO,]},],[/(/MMER/ELECT)BATCH/INDEX,!9999,{//(/MMER/ELECT)BATCH()/RRN:~RRN},],[/(/MMER/ELECT)SAF/INDEX,!9999,{//(/MMER/ELECT)SAF()/RRN:~RRN},],[/(/MMER/ELECT)TIPS/INDEX,!9999,{//(/MMER/ELECT)TIPS()/RRN:~RRN},],[,,{~RRN>:,~INVNO>:},iPAY_SAF_START]]],/iPAY_SAF_START/COND_A]]],SIGN:9DD76FDEB33321EFA67AE01E48DC9011B68B9E0E}